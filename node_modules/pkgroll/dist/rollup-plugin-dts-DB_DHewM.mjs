import{createRequire as _pkgrollCR}from"node:module";const require=_pkgrollCR(import.meta.url);var Ue=Object.defineProperty;var g=(f,e)=>Ue(f,"name",{value:e,configurable:!0});import*as O from"path";import c from"./local-typescript-loader-CNJ4NZni.mjs";import He from"tty";import Xe from"os";import{createRequire as Ye}from"module";import Je from"magic-string";var q={},j={},W={},he;function Qe(){return he||(he=1,Object.defineProperty(W,"__esModule",{value:!0}),W.default=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyus]{1,6}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g,W.matchToToken=function(f){var e={type:"invalid",value:f[0],closed:void 0};return f[1]?(e.type="string",e.closed=!!(f[3]||f[4])):f[5]?e.type="comment":f[6]?(e.type="comment",e.closed=!!f[7]):f[8]?e.type="regex":f[9]?e.type="number":f[10]?e.type="name":f[11]?e.type="punctuator":f[12]&&(e.type="whitespace"),e}),W}g(Qe,"requireJsTokens");var ee={},L={},be;function Ze(){if(be)return L;be=1,Object.defineProperty(L,"__esModule",{value:!0}),L.isIdentifierChar=n,L.isIdentifierName=a,L.isIdentifierStart=d;let f="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",e="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\u30FB\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F\uFF65";const r=new RegExp("["+f+"]"),s=new RegExp("["+f+e+"]");f=e=null;const l=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],v=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239];function p(t,i){let o=65536;for(let h=0,u=i.length;h<u;h+=2){if(o+=i[h],o>t)return!1;if(o+=i[h+1],o>=t)return!0}return!1}g(p,"isInAstralSet");function d(t){return t<65?t===36:t<=90?!0:t<97?t===95:t<=122?!0:t<=65535?t>=170&&r.test(String.fromCharCode(t)):p(t,l)}g(d,"isIdentifierStart");function n(t){return t<48?t===36:t<58?!0:t<65?!1:t<=90?!0:t<97?t===95:t<=122?!0:t<=65535?t>=170&&s.test(String.fromCharCode(t)):p(t,l)||p(t,v)}g(n,"isIdentifierChar");function a(t){let i=!0;for(let o=0;o<t.length;o++){let h=t.charCodeAt(o);if((h&64512)===55296&&o+1<t.length){const u=t.charCodeAt(++o);(u&64512)===56320&&(h=65536+((h&1023)<<10)+(u&1023))}if(i){if(i=!1,!d(h))return!1}else if(!n(h))return!1}return!i}return g(a,"isIdentifierName"),L}g(Ze,"requireIdentifier");var P={},ge;function et(){if(ge)return P;ge=1,Object.defineProperty(P,"__esModule",{value:!0}),P.isKeyword=n,P.isReservedWord=l,P.isStrictBindOnlyReservedWord=p,P.isStrictBindReservedWord=d,P.isStrictReservedWord=v;const f={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},e=new Set(f.keyword),r=new Set(f.strict),s=new Set(f.strictBind);function l(a,t){return t&&a==="await"||a==="enum"}g(l,"isReservedWord");function v(a,t){return l(a,t)||r.has(a)}g(v,"isStrictReservedWord");function p(a){return s.has(a)}g(p,"isStrictBindOnlyReservedWord");function d(a,t){return v(a,t)||p(a)}g(d,"isStrictBindReservedWord");function n(a){return e.has(a)}return g(n,"isKeyword"),P}g(et,"requireKeyword");var ye;function tt(){return ye||(ye=1,function(f){Object.defineProperty(f,"__esModule",{value:!0}),Object.defineProperty(f,"isIdentifierChar",{enumerable:!0,get:g(function(){return e.isIdentifierChar},"get")}),Object.defineProperty(f,"isIdentifierName",{enumerable:!0,get:g(function(){return e.isIdentifierName},"get")}),Object.defineProperty(f,"isIdentifierStart",{enumerable:!0,get:g(function(){return e.isIdentifierStart},"get")}),Object.defineProperty(f,"isKeyword",{enumerable:!0,get:g(function(){return r.isKeyword},"get")}),Object.defineProperty(f,"isReservedWord",{enumerable:!0,get:g(function(){return r.isReservedWord},"get")}),Object.defineProperty(f,"isStrictBindOnlyReservedWord",{enumerable:!0,get:g(function(){return r.isStrictBindOnlyReservedWord},"get")}),Object.defineProperty(f,"isStrictBindReservedWord",{enumerable:!0,get:g(function(){return r.isStrictBindReservedWord},"get")}),Object.defineProperty(f,"isStrictReservedWord",{enumerable:!0,get:g(function(){return r.isStrictReservedWord},"get")});var e=Ze(),r=et()}(ee)),ee}g(tt,"requireLib$2");var U={exports:{}},ve;function xe(){if(ve)return U.exports;ve=1;let f=process.argv||[],e=process.env,r=!("NO_COLOR"in e||f.includes("--no-color"))&&("FORCE_COLOR"in e||f.includes("--color")||process.platform==="win32"||require!=null&&He.isatty(1)&&e.TERM!=="dumb"||"CI"in e),s=g((p,d,n=p)=>a=>{let t=""+a,i=t.indexOf(d,p.length);return~i?p+l(t,d,n,i)+d:p+t+d},"formatter"),l=g((p,d,n,a)=>{let t="",i=0;do t+=p.substring(i,a)+n,i=a+d.length,a=p.indexOf(d,i);while(~a);return t+p.substring(i)},"replaceClose"),v=g((p=r)=>{let d=p?s:()=>String;return{isColorSupported:p,reset:d("\x1B[0m","\x1B[0m"),bold:d("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:d("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:d("\x1B[3m","\x1B[23m"),underline:d("\x1B[4m","\x1B[24m"),inverse:d("\x1B[7m","\x1B[27m"),hidden:d("\x1B[8m","\x1B[28m"),strikethrough:d("\x1B[9m","\x1B[29m"),black:d("\x1B[30m","\x1B[39m"),red:d("\x1B[31m","\x1B[39m"),green:d("\x1B[32m","\x1B[39m"),yellow:d("\x1B[33m","\x1B[39m"),blue:d("\x1B[34m","\x1B[39m"),magenta:d("\x1B[35m","\x1B[39m"),cyan:d("\x1B[36m","\x1B[39m"),white:d("\x1B[37m","\x1B[39m"),gray:d("\x1B[90m","\x1B[39m"),bgBlack:d("\x1B[40m","\x1B[49m"),bgRed:d("\x1B[41m","\x1B[49m"),bgGreen:d("\x1B[42m","\x1B[49m"),bgYellow:d("\x1B[43m","\x1B[49m"),bgBlue:d("\x1B[44m","\x1B[49m"),bgMagenta:d("\x1B[45m","\x1B[49m"),bgCyan:d("\x1B[46m","\x1B[49m"),bgWhite:d("\x1B[47m","\x1B[49m")}},"createColors");return U.exports=v(),U.exports.createColors=v,U.exports}g(xe,"requirePicocolors");var te={exports:{}},re,we;function rt(){if(we)return re;we=1;var f=/[|\\{}()[\]^$+*?.]/g;return re=g(function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(f,"\\$&")},"escapeStringRegexp"),re}g(rt,"requireEscapeStringRegexp");var H={exports:{}},ne={exports:{}},ae,Se;function nt(){return Se||(Se=1,ae={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),ae}g(nt,"requireColorName");var Ee;function Ce(){if(Ee)return ne.exports;Ee=1;var f=nt(),e={};for(var r in f)f.hasOwnProperty(r)&&(e[f[r]]=r);var s=ne.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var l in s)if(s.hasOwnProperty(l)){if(!("channels"in s[l]))throw new Error("missing channels property: "+l);if(!("labels"in s[l]))throw new Error("missing channel labels property: "+l);if(s[l].labels.length!==s[l].channels)throw new Error("channel and label counts mismatch: "+l);var v=s[l].channels,p=s[l].labels;delete s[l].channels,delete s[l].labels,Object.defineProperty(s[l],"channels",{value:v}),Object.defineProperty(s[l],"labels",{value:p})}s.rgb.hsl=function(n){var a=n[0]/255,t=n[1]/255,i=n[2]/255,o=Math.min(a,t,i),h=Math.max(a,t,i),u=h-o,m,y,b;return h===o?m=0:a===h?m=(t-i)/u:t===h?m=2+(i-a)/u:i===h&&(m=4+(a-t)/u),m=Math.min(m*60,360),m<0&&(m+=360),b=(o+h)/2,h===o?y=0:b<=.5?y=u/(h+o):y=u/(2-h-o),[m,y*100,b*100]},s.rgb.hsv=function(n){var a,t,i,o,h,u=n[0]/255,m=n[1]/255,y=n[2]/255,b=Math.max(u,m,y),w=b-Math.min(u,m,y),x=g(function(S){return(b-S)/6/w+1/2},"diffc");return w===0?o=h=0:(h=w/b,a=x(u),t=x(m),i=x(y),u===b?o=i-t:m===b?o=1/3+a-i:y===b&&(o=2/3+t-a),o<0?o+=1:o>1&&(o-=1)),[o*360,h*100,b*100]},s.rgb.hwb=function(n){var a=n[0],t=n[1],i=n[2],o=s.rgb.hsl(n)[0],h=1/255*Math.min(a,Math.min(t,i));return i=1-1/255*Math.max(a,Math.max(t,i)),[o,h*100,i*100]},s.rgb.cmyk=function(n){var a=n[0]/255,t=n[1]/255,i=n[2]/255,o,h,u,m;return m=Math.min(1-a,1-t,1-i),o=(1-a-m)/(1-m)||0,h=(1-t-m)/(1-m)||0,u=(1-i-m)/(1-m)||0,[o*100,h*100,u*100,m*100]};function d(n,a){return Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2)+Math.pow(n[2]-a[2],2)}return g(d,"comparativeDistance"),s.rgb.keyword=function(n){var a=e[n];if(a)return a;var t=1/0,i;for(var o in f)if(f.hasOwnProperty(o)){var h=f[o],u=d(n,h);u<t&&(t=u,i=o)}return i},s.keyword.rgb=function(n){return f[n]},s.rgb.xyz=function(n){var a=n[0]/255,t=n[1]/255,i=n[2]/255;a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var o=a*.4124+t*.3576+i*.1805,h=a*.2126+t*.7152+i*.0722,u=a*.0193+t*.1192+i*.9505;return[o*100,h*100,u*100]},s.rgb.lab=function(n){var a=s.rgb.xyz(n),t=a[0],i=a[1],o=a[2],h,u,m;return t/=95.047,i/=100,o/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,h=116*i-16,u=500*(t-i),m=200*(i-o),[h,u,m]},s.hsl.rgb=function(n){var a=n[0]/360,t=n[1]/100,i=n[2]/100,o,h,u,m,y;if(t===0)return y=i*255,[y,y,y];i<.5?h=i*(1+t):h=i+t-i*t,o=2*i-h,m=[0,0,0];for(var b=0;b<3;b++)u=a+1/3*-(b-1),u<0&&u++,u>1&&u--,6*u<1?y=o+(h-o)*6*u:2*u<1?y=h:3*u<2?y=o+(h-o)*(2/3-u)*6:y=o,m[b]=y*255;return m},s.hsl.hsv=function(n){var a=n[0],t=n[1]/100,i=n[2]/100,o=t,h=Math.max(i,.01),u,m;return i*=2,t*=i<=1?i:2-i,o*=h<=1?h:2-h,m=(i+t)/2,u=i===0?2*o/(h+o):2*t/(i+t),[a,u*100,m*100]},s.hsv.rgb=function(n){var a=n[0]/60,t=n[1]/100,i=n[2]/100,o=Math.floor(a)%6,h=a-Math.floor(a),u=255*i*(1-t),m=255*i*(1-t*h),y=255*i*(1-t*(1-h));switch(i*=255,o){case 0:return[i,y,u];case 1:return[m,i,u];case 2:return[u,i,y];case 3:return[u,m,i];case 4:return[y,u,i];case 5:return[i,u,m]}},s.hsv.hsl=function(n){var a=n[0],t=n[1]/100,i=n[2]/100,o=Math.max(i,.01),h,u,m;return m=(2-t)*i,h=(2-t)*o,u=t*o,u/=h<=1?h:2-h,u=u||0,m/=2,[a,u*100,m*100]},s.hwb.rgb=function(n){var a=n[0]/360,t=n[1]/100,i=n[2]/100,o=t+i,h,u,m,y;o>1&&(t/=o,i/=o),h=Math.floor(6*a),u=1-i,m=6*a-h,h&1&&(m=1-m),y=t+m*(u-t);var b,w,x;switch(h){default:case 6:case 0:b=u,w=y,x=t;break;case 1:b=y,w=u,x=t;break;case 2:b=t,w=u,x=y;break;case 3:b=t,w=y,x=u;break;case 4:b=y,w=t,x=u;break;case 5:b=u,w=t,x=y;break}return[b*255,w*255,x*255]},s.cmyk.rgb=function(n){var a=n[0]/100,t=n[1]/100,i=n[2]/100,o=n[3]/100,h,u,m;return h=1-Math.min(1,a*(1-o)+o),u=1-Math.min(1,t*(1-o)+o),m=1-Math.min(1,i*(1-o)+o),[h*255,u*255,m*255]},s.xyz.rgb=function(n){var a=n[0]/100,t=n[1]/100,i=n[2]/100,o,h,u;return o=a*3.2406+t*-1.5372+i*-.4986,h=a*-.9689+t*1.8758+i*.0415,u=a*.0557+t*-.204+i*1.057,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:h*12.92,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u*12.92,o=Math.min(Math.max(0,o),1),h=Math.min(Math.max(0,h),1),u=Math.min(Math.max(0,u),1),[o*255,h*255,u*255]},s.xyz.lab=function(n){var a=n[0],t=n[1],i=n[2],o,h,u;return a/=95.047,t/=100,i/=108.883,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,o=116*t-16,h=500*(a-t),u=200*(t-i),[o,h,u]},s.lab.xyz=function(n){var a=n[0],t=n[1],i=n[2],o,h,u;h=(a+16)/116,o=t/500+h,u=h-i/200;var m=Math.pow(h,3),y=Math.pow(o,3),b=Math.pow(u,3);return h=m>.008856?m:(h-16/116)/7.787,o=y>.008856?y:(o-16/116)/7.787,u=b>.008856?b:(u-16/116)/7.787,o*=95.047,h*=100,u*=108.883,[o,h,u]},s.lab.lch=function(n){var a=n[0],t=n[1],i=n[2],o,h,u;return o=Math.atan2(i,t),h=o*360/2/Math.PI,h<0&&(h+=360),u=Math.sqrt(t*t+i*i),[a,u,h]},s.lch.lab=function(n){var a=n[0],t=n[1],i=n[2],o,h,u;return u=i/360*2*Math.PI,o=t*Math.cos(u),h=t*Math.sin(u),[a,o,h]},s.rgb.ansi16=function(n){var a=n[0],t=n[1],i=n[2],o=1 in arguments?arguments[1]:s.rgb.hsv(n)[2];if(o=Math.round(o/50),o===0)return 30;var h=30+(Math.round(i/255)<<2|Math.round(t/255)<<1|Math.round(a/255));return o===2&&(h+=60),h},s.hsv.ansi16=function(n){return s.rgb.ansi16(s.hsv.rgb(n),n[2])},s.rgb.ansi256=function(n){var a=n[0],t=n[1],i=n[2];if(a===t&&t===i)return a<8?16:a>248?231:Math.round((a-8)/247*24)+232;var o=16+36*Math.round(a/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5);return o},s.ansi16.rgb=function(n){var a=n%10;if(a===0||a===7)return n>50&&(a+=3.5),a=a/10.5*255,[a,a,a];var t=(~~(n>50)+1)*.5,i=(a&1)*t*255,o=(a>>1&1)*t*255,h=(a>>2&1)*t*255;return[i,o,h]},s.ansi256.rgb=function(n){if(n>=232){var a=(n-232)*10+8;return[a,a,a]}n-=16;var t,i=Math.floor(n/36)/5*255,o=Math.floor((t=n%36)/6)/5*255,h=t%6/5*255;return[i,o,h]},s.rgb.hex=function(n){var a=((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255),t=a.toString(16).toUpperCase();return"000000".substring(t.length)+t},s.hex.rgb=function(n){var a=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!a)return[0,0,0];var t=a[0];a[0].length===3&&(t=t.split("").map(function(m){return m+m}).join(""));var i=parseInt(t,16),o=i>>16&255,h=i>>8&255,u=i&255;return[o,h,u]},s.rgb.hcg=function(n){var a=n[0]/255,t=n[1]/255,i=n[2]/255,o=Math.max(Math.max(a,t),i),h=Math.min(Math.min(a,t),i),u=o-h,m,y;return u<1?m=h/(1-u):m=0,u<=0?y=0:o===a?y=(t-i)/u%6:o===t?y=2+(i-a)/u:y=4+(a-t)/u+4,y/=6,y%=1,[y*360,u*100,m*100]},s.hsl.hcg=function(n){var a=n[1]/100,t=n[2]/100,i=1,o=0;return t<.5?i=2*a*t:i=2*a*(1-t),i<1&&(o=(t-.5*i)/(1-i)),[n[0],i*100,o*100]},s.hsv.hcg=function(n){var a=n[1]/100,t=n[2]/100,i=a*t,o=0;return i<1&&(o=(t-i)/(1-i)),[n[0],i*100,o*100]},s.hcg.rgb=function(n){var a=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];var o=[0,0,0],h=a%1*6,u=h%1,m=1-u,y=0;switch(Math.floor(h)){case 0:o[0]=1,o[1]=u,o[2]=0;break;case 1:o[0]=m,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=u;break;case 3:o[0]=0,o[1]=m,o[2]=1;break;case 4:o[0]=u,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=m}return y=(1-t)*i,[(t*o[0]+y)*255,(t*o[1]+y)*255,(t*o[2]+y)*255]},s.hcg.hsv=function(n){var a=n[1]/100,t=n[2]/100,i=a+t*(1-a),o=0;return i>0&&(o=a/i),[n[0],o*100,i*100]},s.hcg.hsl=function(n){var a=n[1]/100,t=n[2]/100,i=t*(1-a)+.5*a,o=0;return i>0&&i<.5?o=a/(2*i):i>=.5&&i<1&&(o=a/(2*(1-i))),[n[0],o*100,i*100]},s.hcg.hwb=function(n){var a=n[1]/100,t=n[2]/100,i=a+t*(1-a);return[n[0],(i-a)*100,(1-i)*100]},s.hwb.hcg=function(n){var a=n[1]/100,t=n[2]/100,i=1-t,o=i-a,h=0;return o<1&&(h=(i-o)/(1-o)),[n[0],o*100,h*100]},s.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]},s.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]},s.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]},s.gray.hsl=s.gray.hsv=function(n){return[0,0,n[0]]},s.gray.hwb=function(n){return[0,100,n[0]]},s.gray.cmyk=function(n){return[0,0,0,n[0]]},s.gray.lab=function(n){return[n[0],0,0]},s.gray.hex=function(n){var a=Math.round(n[0]/100*255)&255,t=(a<<16)+(a<<8)+a,i=t.toString(16).toUpperCase();return"000000".substring(i.length)+i},s.rgb.gray=function(n){var a=(n[0]+n[1]+n[2])/3;return[a/255*100]},ne.exports}g(Ce,"requireConversions");var ie,Te;function at(){if(Te)return ie;Te=1;var f=Ce();function e(){for(var v={},p=Object.keys(f),d=p.length,n=0;n<d;n++)v[p[n]]={distance:-1,parent:null};return v}g(e,"buildGraph");function r(v){var p=e(),d=[v];for(p[v].distance=0;d.length;)for(var n=d.pop(),a=Object.keys(f[n]),t=a.length,i=0;i<t;i++){var o=a[i],h=p[o];h.distance===-1&&(h.distance=p[n].distance+1,h.parent=n,d.unshift(o))}return p}g(r,"deriveBFS");function s(v,p){return function(d){return p(v(d))}}g(s,"link");function l(v,p){for(var d=[p[v].parent,v],n=f[p[v].parent][v],a=p[v].parent;p[a].parent;)d.unshift(p[a].parent),n=s(f[p[a].parent][a],n),a=p[a].parent;return n.conversion=d,n}return g(l,"wrapConversion"),ie=g(function(v){for(var p=r(v),d={},n=Object.keys(p),a=n.length,t=0;t<a;t++){var i=n[t],o=p[i];o.parent!==null&&(d[i]=l(i,p))}return d},"route"),ie}g(at,"requireRoute");var se,Ne;function it(){if(Ne)return se;Ne=1;var f=Ce(),e=at(),r={},s=Object.keys(f);function l(p){var d=g(function(n){return n==null?n:(arguments.length>1&&(n=Array.prototype.slice.call(arguments)),p(n))},"wrappedFn");return"conversion"in p&&(d.conversion=p.conversion),d}g(l,"wrapRaw");function v(p){var d=g(function(n){if(n==null)return n;arguments.length>1&&(n=Array.prototype.slice.call(arguments));var a=p(n);if(typeof a=="object")for(var t=a.length,i=0;i<t;i++)a[i]=Math.round(a[i]);return a},"wrappedFn");return"conversion"in p&&(d.conversion=p.conversion),d}return g(v,"wrapRounded"),s.forEach(function(p){r[p]={},Object.defineProperty(r[p],"channels",{value:f[p].channels}),Object.defineProperty(r[p],"labels",{value:f[p].labels});var d=e(p),n=Object.keys(d);n.forEach(function(a){var t=d[a];r[p][a]=v(t),r[p][a].raw=l(t)})}),se=r,se}g(it,"requireColorConvert"),H.exports;var Oe;function st(){return Oe||(Oe=1,function(f){const e=it(),r=g((p,d)=>function(){return`\x1B[${p.apply(e,arguments)+d}m`},"wrapAnsi16"),s=g((p,d)=>function(){const n=p.apply(e,arguments);return`\x1B[${38+d};5;${n}m`},"wrapAnsi256"),l=g((p,d)=>function(){const n=p.apply(e,arguments);return`\x1B[${38+d};2;${n[0]};${n[1]};${n[2]}m`},"wrapAnsi16m");function v(){const p=new Map,d={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};d.color.grey=d.color.gray;for(const t of Object.keys(d)){const i=d[t];for(const o of Object.keys(i)){const h=i[o];d[o]={open:`\x1B[${h[0]}m`,close:`\x1B[${h[1]}m`},i[o]=d[o],p.set(h[0],h[1])}Object.defineProperty(d,t,{value:i,enumerable:!1}),Object.defineProperty(d,"codes",{value:p,enumerable:!1})}const n=g(t=>t,"ansi2ansi"),a=g((t,i,o)=>[t,i,o],"rgb2rgb");d.color.close="\x1B[39m",d.bgColor.close="\x1B[49m",d.color.ansi={ansi:r(n,0)},d.color.ansi256={ansi256:s(n,0)},d.color.ansi16m={rgb:l(a,0)},d.bgColor.ansi={ansi:r(n,10)},d.bgColor.ansi256={ansi256:s(n,10)},d.bgColor.ansi16m={rgb:l(a,10)};for(let t of Object.keys(e)){if(typeof e[t]!="object")continue;const i=e[t];t==="ansi16"&&(t="ansi"),"ansi16"in i&&(d.color.ansi[t]=r(i.ansi16,0),d.bgColor.ansi[t]=r(i.ansi16,10)),"ansi256"in i&&(d.color.ansi256[t]=s(i.ansi256,0),d.bgColor.ansi256[t]=s(i.ansi256,10)),"rgb"in i&&(d.color.ansi16m[t]=l(i.rgb,0),d.bgColor.ansi16m[t]=l(i.rgb,10))}return d}g(v,"assembleStyles"),Object.defineProperty(f,"exports",{enumerable:!0,get:v})}(H)),H.exports}g(st,"requireAnsiStyles");var ue,ke;function ut(){return ke||(ke=1,ue=g((f,e)=>{e=e||process.argv;const r=f.startsWith("-")?"":f.length===1?"-":"--",s=e.indexOf(r+f),l=e.indexOf("--");return s!==-1&&(l===-1?!0:s<l)},"hasFlag")),ue}g(ut,"requireHasFlag");var oe,De;function ot(){if(De)return oe;De=1;const f=Xe,e=ut(),r=process.env;let s;e("no-color")||e("no-colors")||e("color=false")?s=!1:(e("color")||e("colors")||e("color=true")||e("color=always"))&&(s=!0),"FORCE_COLOR"in r&&(s=r.FORCE_COLOR.length===0||parseInt(r.FORCE_COLOR,10)!==0);function l(d){return d===0?!1:{level:d,hasBasic:!0,has256:d>=2,has16m:d>=3}}g(l,"translateLevel");function v(d){if(s===!1)return 0;if(e("color=16m")||e("color=full")||e("color=truecolor"))return 3;if(e("color=256"))return 2;if(d&&!d.isTTY&&s!==!0)return 0;const n=s?1:0;if(process.platform==="win32"){const a=f.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(a=>a in r)||r.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(r.TEAMCITY_VERSION)?1:0;if(r.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in r){const a=parseInt((r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(r.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(r.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(r.TERM)||"COLORTERM"in r?1:(r.TERM==="dumb",n)}g(v,"supportsColor");function p(d){const n=v(d);return l(n)}return g(p,"getSupportLevel"),oe={supportsColor:p,stdout:p(process.stdout),stderr:p(process.stderr)},oe}g(ot,"requireSupportsColor");var ce,Re;function ct(){if(Re)return ce;Re=1;const f=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,e=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,r=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,s=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,l=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function v(a){return a[0]==="u"&&a.length===5||a[0]==="x"&&a.length===3?String.fromCharCode(parseInt(a.slice(1),16)):l.get(a)||a}g(v,"unescape");function p(a,t){const i=[],o=t.trim().split(/\s*,\s*/g);let h;for(const u of o)if(!isNaN(u))i.push(Number(u));else if(h=u.match(r))i.push(h[2].replace(s,(m,y,b)=>y?v(y):b));else throw new Error(`Invalid Chalk template style argument: ${u} (in style '${a}')`);return i}g(p,"parseArguments");function d(a){e.lastIndex=0;const t=[];let i;for(;(i=e.exec(a))!==null;){const o=i[1];if(i[2]){const h=p(o,i[2]);t.push([o].concat(h))}else t.push([o])}return t}g(d,"parseStyle");function n(a,t){const i={};for(const h of t)for(const u of h.styles)i[u[0]]=h.inverse?null:u.slice(1);let o=a;for(const h of Object.keys(i))if(Array.isArray(i[h])){if(!(h in o))throw new Error(`Unknown Chalk style: ${h}`);i[h].length>0?o=o[h].apply(o,i[h]):o=o[h]}return o}return g(n,"buildStyle"),ce=g((a,t)=>{const i=[],o=[];let h=[];if(t.replace(f,(u,m,y,b,w,x)=>{if(m)h.push(v(m));else if(b){const S=h.join("");h=[],o.push(i.length===0?S:n(a,i)(S)),i.push({inverse:y,styles:d(b)})}else if(w){if(i.length===0)throw new Error("Found extraneous } in Chalk template literal");o.push(n(a,i)(h.join(""))),h=[],i.pop()}else h.push(x)}),o.push(h.join("")),i.length>0){const u=`Chalk template literal is missing ${i.length} closing bracket${i.length===1?"":"s"} (\`}\`)`;throw new Error(u)}return o.join("")},"templates"),ce}g(ct,"requireTemplates");var Me;function lt(){return Me||(Me=1,function(f){const e=rt(),r=st(),s=ot().stdout,l=ct(),v=process.platform==="win32"&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),p=["ansi","ansi","ansi256","ansi16m"],d=new Set(["gray"]),n=Object.create(null);function a(m,y){y=y||{};const b=s?s.level:0;m.level=y.level===void 0?b:y.level,m.enabled="enabled"in y?y.enabled:m.level>0}g(a,"applyOptions");function t(m){if(!this||!(this instanceof t)||this.template){const y={};return a(y,m),y.template=function(){const b=[].slice.call(arguments);return u.apply(null,[y.template].concat(b))},Object.setPrototypeOf(y,t.prototype),Object.setPrototypeOf(y.template,y),y.template.constructor=t,y.template}a(this,m)}g(t,"Chalk"),v&&(r.blue.open="\x1B[94m");for(const m of Object.keys(r))r[m].closeRe=new RegExp(e(r[m].close),"g"),n[m]={get(){const y=r[m];return o.call(this,this._styles?this._styles.concat(y):[y],this._empty,m)}};n.visible={get(){return o.call(this,this._styles||[],!0,"visible")}},r.color.closeRe=new RegExp(e(r.color.close),"g");for(const m of Object.keys(r.color.ansi))d.has(m)||(n[m]={get(){const y=this.level;return function(){const w={open:r.color[p[y]][m].apply(null,arguments),close:r.color.close,closeRe:r.color.closeRe};return o.call(this,this._styles?this._styles.concat(w):[w],this._empty,m)}}});r.bgColor.closeRe=new RegExp(e(r.bgColor.close),"g");for(const m of Object.keys(r.bgColor.ansi)){if(d.has(m))continue;const y="bg"+m[0].toUpperCase()+m.slice(1);n[y]={get(){const b=this.level;return function(){const x={open:r.bgColor[p[b]][m].apply(null,arguments),close:r.bgColor.close,closeRe:r.bgColor.closeRe};return o.call(this,this._styles?this._styles.concat(x):[x],this._empty,m)}}}}const i=Object.defineProperties(()=>{},n);function o(m,y,b){const w=g(function(){return h.apply(w,arguments)},"builder");w._styles=m,w._empty=y;const x=this;return Object.defineProperty(w,"level",{enumerable:!0,get(){return x.level},set(S){x.level=S}}),Object.defineProperty(w,"enabled",{enumerable:!0,get(){return x.enabled},set(S){x.enabled=S}}),w.hasGrey=this.hasGrey||b==="gray"||b==="grey",w.__proto__=i,w}g(o,"build");function h(){const m=arguments,y=m.length;let b=String(arguments[0]);if(y===0)return"";if(y>1)for(let x=1;x<y;x++)b+=" "+m[x];if(!this.enabled||this.level<=0||!b)return this._empty?"":b;const w=r.dim.open;v&&this.hasGrey&&(r.dim.open="");for(const x of this._styles.slice().reverse())b=x.open+b.replace(x.closeRe,x.open)+x.close,b=b.replace(/\r?\n/g,`${x.close}$&${x.open}`);return r.dim.open=w,b}g(h,"applyStyle");function u(m,y){if(!Array.isArray(y))return[].slice.call(arguments,1).join(" ");const b=[].slice.call(arguments,2),w=[y.raw[0]];for(let x=1;x<y.length;x++)w.push(String(b[x-1]).replace(/[{}\\]/g,"\\$&")),w.push(String(y.raw[x]));return l(m,w.join(""))}g(u,"chalkTag"),Object.defineProperties(t.prototype,n),f.exports=t(),f.exports.supportsColor=s,f.exports.default=f.exports}(te)),te.exports}g(lt,"requireChalk");var Ie;function ft(){if(Ie)return j;Ie=1,Object.defineProperty(j,"__esModule",{value:!0}),j.default=y,j.shouldHighlight=h;var f=Qe(),e=tt(),r=l(xe(),!0);function s(b){if(typeof WeakMap!="function")return null;var w=new WeakMap,x=new WeakMap;return(s=g(function(S){return S?x:w},"_getRequireWildcardCache"))(b)}g(s,"_getRequireWildcardCache");function l(b,w){if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var x=s(w);if(x&&x.has(b))return x.get(b);var S={__proto__:null},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in b)if(E!=="default"&&{}.hasOwnProperty.call(b,E)){var T=C?Object.getOwnPropertyDescriptor(b,E):null;T&&(T.get||T.set)?Object.defineProperty(S,E,T):S[E]=b[E]}return S.default=b,x&&x.set(b,S),S}g(l,"_interopRequireWildcard");const v=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,r.createColors)(!1):r.default,p=g((b,w)=>x=>b(w(x)),"compose"),d=new Set(["as","async","from","get","of","set"]);function n(b){return{keyword:b.cyan,capitalized:b.yellow,jsxIdentifier:b.yellow,punctuator:b.yellow,number:b.magenta,string:b.green,regex:b.magenta,comment:b.gray,invalid:p(p(b.white,b.bgRed),b.bold)}}g(n,"getDefs");const a=/\r\n|[\n\r\u2028\u2029]/,t=/^[()[\]{}]$/;let i;{const b=/^[a-z][\w-]*$/i,w=g(function(x,S,C){if(x.type==="name"){if((0,e.isKeyword)(x.value)||(0,e.isStrictReservedWord)(x.value,!0)||d.has(x.value))return"keyword";if(b.test(x.value)&&(C[S-1]==="<"||C.slice(S-2,S)==="</"))return"jsxIdentifier";if(x.value[0]!==x.value[0].toLowerCase())return"capitalized"}return x.type==="punctuator"&&t.test(x.value)?"bracket":x.type==="invalid"&&(x.value==="@"||x.value==="#")?"punctuator":x.type},"getTokenType");i=g(function*(x){let S;for(;S=f.default.exec(x);){const C=f.matchToToken(S);yield{type:w(C,S.index,x),value:C.value}}},"tokenize")}function o(b,w){let x="";for(const{type:S,value:C}of i(w)){const E=b[S];E?x+=C.split(a).map(T=>E(T)).join(`
`):x+=C}return x}g(o,"highlightTokens");function h(b){return v.isColorSupported||b.forceColor}g(h,"shouldHighlight");let u;function m(b){if(b){var w;return(w=u)!=null||(u=(0,r.createColors)(!0)),u}return v}g(m,"getColors");function y(b,w={}){if(b!==""&&h(w)){const x=n(m(w.forceColor));return o(x,b)}else return b}g(y,"highlight");{let b,w;j.getChalk=({forceColor:x})=>{var S;if((S=b)!=null||(b=lt()),x){var C;return(C=w)!=null||(w=new b.constructor({enabled:!0,level:1})),w}return b}}return j}g(ft,"requireLib$1");var Fe;function pt(){if(Fe)return q;Fe=1,Object.defineProperty(q,"__esModule",{value:!0}),q.codeFrameColumns=o,q.default=h;var f=ft(),e=s(xe(),!0);function r(u){if(typeof WeakMap!="function")return null;var m=new WeakMap,y=new WeakMap;return(r=g(function(b){return b?y:m},"_getRequireWildcardCache"))(u)}g(r,"_getRequireWildcardCache");function s(u,m){if(u===null||typeof u!="object"&&typeof u!="function")return{default:u};var y=r(m);if(y&&y.has(u))return y.get(u);var b={__proto__:null},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in u)if(x!=="default"&&Object.prototype.hasOwnProperty.call(u,x)){var S=w?Object.getOwnPropertyDescriptor(u,x):null;S&&(S.get||S.set)?Object.defineProperty(b,x,S):b[x]=u[x]}return b.default=u,y&&y.set(u,b),b}g(s,"_interopRequireWildcard");const l=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,e.createColors)(!1):e.default,v=g((u,m)=>y=>u(m(y)),"compose");let p;function d(u){if(u){var m;return(m=p)!=null||(p=(0,e.createColors)(!0)),p}return l}g(d,"getColors");let n=!1;function a(u){return{gutter:u.gray,marker:v(u.red,u.bold),message:v(u.red,u.bold)}}g(a,"getDefs");const t=/\r\n|[\n\r\u2028\u2029]/;function i(u,m,y){const b=Object.assign({column:0,line:-1},u.start),w=Object.assign({},b,u.end),{linesAbove:x=2,linesBelow:S=3}=y||{},C=b.line,E=b.column,T=w.line,R=w.column;let $=Math.max(C-(x+1),0),K=Math.min(m.length,T+S);C===-1&&($=0),T===-1&&(K=m.length);const z=T-C,I={};if(z)for(let M=0;M<=z;M++){const F=M+C;if(!E)I[F]=!0;else if(M===0){const A=m[F-1].length;I[F]=[E,A-E+1]}else if(M===z)I[F]=[0,R];else{const A=m[F-M].length;I[F]=[0,A]}}else E===R?E?I[C]=[E,0]:I[C]=!0:I[C]=[E,R-E];return{start:$,end:K,markerLines:I}}g(i,"getMarkerLines");function o(u,m,y={}){const b=(y.highlightCode||y.forceColor)&&(0,f.shouldHighlight)(y),w=d(y.forceColor),x=a(w),S=g((M,F)=>b?M(F):F,"maybeHighlight"),C=u.split(t),{start:E,end:T,markerLines:R}=i(m,C,y),$=m.start&&typeof m.start.column=="number",K=String(T).length;let I=(b?(0,f.default)(u,y):u).split(t,T).slice(E,T).map((M,F)=>{const A=E+1+F,Q=` ${` ${A}`.slice(-K)} |`,V=R[A],Ge=!R[A+1];if(V){let Z="";if(Array.isArray(V)){const ze=M.slice(0,Math.max(V[0]-1,0)).replace(/[^\t]/g," "),Ve=V[1]||1;Z=[`
 `,S(x.gutter,Q.replace(/\d/g," "))," ",ze,S(x.marker,"^").repeat(Ve)].join(""),Ge&&y.message&&(Z+=" "+S(x.message,y.message))}return[S(x.marker,">"),S(x.gutter,Q),M.length>0?` ${M}`:"",Z].join("")}else return` ${S(x.gutter,Q)}${M.length>0?` ${M}`:""}`}).join(`
`);return y.message&&!$&&(I=`${" ".repeat(K+1)}${y.message}
${I}`),b?w.reset(I):I}g(o,"codeFrameColumns");function h(u,m,y,b={}){if(!n){n=!0;const x="Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";if(process.emitWarning)process.emitWarning(x,"DeprecationWarning");else{const S=new Error(x);S.name="DeprecationWarning",console.warn(new Error(x))}}return y=Math.max(y,0),o(u,{start:{column:y,line:m}},b)}return g(h,"_default"),q}g(pt,"requireLib"),pt();function dt(f){return{...f,compilerOptions:f.compilerOptions??{},respectExternal:f.respectExternal??!1}}g(dt,"resolveDefaultOptions");const X=/\.d\.(c|m)?tsx?$/,Pe=".d.ts",le={getCurrentDirectory:g(()=>c.sys.getCurrentDirectory(),"getCurrentDirectory"),getNewLine:g(()=>c.sys.newLine,"getNewLine"),getCanonicalFileName:c.sys.useCaseSensitiveFileNames?f=>f:f=>f.toLowerCase()},mt={declaration:!0,noEmit:!1,emitDeclarationOnly:!0,noEmitOnError:!0,checkJs:!1,declarationMap:!1,skipLibCheck:!0,preserveSymlinks:!0,target:c.ScriptTarget.ESNext},G=new Map,B=g((...f)=>process.env.DTS_LOG_CACHE?console.log("[cache]",...f):null,"logCache");function $e([f,e],r){for(B(f),G.set(f,r);f!==e&&f!==O.dirname(f);){if(f=O.dirname(f),B("up",f),G.has(f))return B("has",f);G.set(f,r)}}g($e,"cacheConfig");function fe(f,e,r){const s={...mt,...e};let l=O.dirname(f),v=[];const p=r||l;if(G.has(p))B("HIT",p);else{B("miss",p);const t=r?O.resolve(process.cwd(),r):c.findConfigFile(l,c.sys.fileExists);if(!t)return{dtsFiles:v,dirName:l,compilerOptions:s};let i=l;l=O.dirname(t);const{config:o,error:h}=c.readConfigFile(t,c.sys.readFile);if(h)return console.error(c.formatDiagnostic(h,le)),{dtsFiles:v,dirName:l,compilerOptions:s};B("tsconfig",o);const u=c.parseJsonConfigFileContent(o,c.sys,l);$e(r?[r,r]:[i,l],u)}const{fileNames:d,options:n,errors:a}=G.get(p);return v=d.filter(t=>X.test(t)),a.length?(console.error(c.formatDiagnostics(a,le)),{dtsFiles:v,dirName:l,compilerOptions:s}):{dtsFiles:v,dirName:l,compilerOptions:{...n,...s}}}g(fe,"getCompilerOptions");function ht(f,e,r){const{dtsFiles:s,compilerOptions:l}=fe(f,e,r);return c.createProgram([f].concat(Array.from(s)),l,c.createCompilerHost(l,!0))}g(ht,"createProgram$1");function bt(f,e,r){const s=[];let l=[],v=new Set,p="",d={};for(let n of f){if(X.test(n))continue;n=O.resolve(n);const a=fe(n,e,r);if(a.dtsFiles.forEach(v.add,v),!l.length){l.push(n),{dirName:p,compilerOptions:d}=a;continue}if(a.dirName===p)l.push(n);else{const t=c.createCompilerHost(d,!0),i=c.createProgram(l.concat(Array.from(v)),d,t);s.push(i),l=[n],{dirName:p,compilerOptions:d}=a}}if(l.length){const n=c.createCompilerHost(d,!0),a=c.createProgram(l.concat(Array.from(v)),d,n);s.push(a)}return s}g(bt,"createPrograms");function gt(){let f;try{return{codeFrameColumns:f}=require("@babel/code-frame"),f}catch{try{return{codeFrameColumns:f}=Ye(import.meta.url)("@babel/code-frame"),f}catch{}}}g(gt,"getCodeFrame");function yt(f){const e=f.getSourceFile(),r=e.getLineAndCharacterOfPosition(f.getStart()),s=e.getLineAndCharacterOfPosition(f.getEnd());return{start:{line:r.line+1,column:r.character+1},end:{line:s.line+1,column:s.character+1}}}g(yt,"getLocation");function vt(f){const e=gt(),s=f.getSourceFile().getFullText(),l=yt(f);return e?`
`+e(s,l,{highlightCode:!0}):`
${l.start.line}:${l.start.column}: \`${f.getFullText().trim()}\``}g(vt,"frameNode");class N extends Error{static{g(this,"UnsupportedSyntaxError")}constructor(e,r="Syntax not yet supported"){super(`${r}
${vt(e)}`)}}class xt{static{g(this,"NamespaceFixer")}constructor(e){this.sourceFile=e}findNamespaces(){const e=[],r={};for(const s of this.sourceFile.statements){const l={start:s.getStart(),end:s.getEnd()};if(c.isEmptyStatement(s)){e.unshift({name:"",exports:[],location:l});continue}if((c.isImportDeclaration(s)||c.isExportDeclaration(s))&&s.moduleSpecifier&&c.isStringLiteral(s.moduleSpecifier)){let{text:t}=s.moduleSpecifier;if(t.startsWith(".")&&(t.endsWith(".d.ts")||t.endsWith(".d.cts")||t.endsWith(".d.mts"))){let i=s.moduleSpecifier.getStart()+1,o=s.moduleSpecifier.getEnd()-1;e.unshift({name:"",exports:[],location:{start:i,end:o},textBeforeCodeAfter:t.replace(/\.d\.ts$/,".js").replace(/\.d\.cts$/,".cjs").replace(/\.d\.mts$/,".mjs")})}}if(c.isModuleDeclaration(s)&&s.body&&c.isModuleBlock(s.body)){for(const t of s.body.statements)if(c.isExportDeclaration(t)&&t.exportClause){if(c.isNamespaceExport(t.exportClause))continue;for(const i of t.exportClause.elements)i.propertyName&&i.propertyName.getText()==i.name.getText()&&e.unshift({name:"",exports:[],location:{start:i.propertyName.getEnd(),end:i.name.getEnd()}})}}if(c.isClassDeclaration(s)?r[s.name.getText()]={type:"class",generics:s.typeParameters}:c.isFunctionDeclaration(s)?r[s.name.getText()]={type:"function"}:c.isInterfaceDeclaration(s)?r[s.name.getText()]={type:"interface",generics:s.typeParameters}:c.isTypeAliasDeclaration(s)?r[s.name.getText()]={type:"type",generics:s.typeParameters}:c.isModuleDeclaration(s)&&c.isIdentifier(s.name)?r[s.name.getText()]={type:"namespace"}:c.isEnumDeclaration(s)&&(r[s.name.getText()]={type:"enum"}),!c.isVariableStatement(s))continue;const{declarations:v}=s.declarationList;if(v.length!==1)continue;const p=v[0],d=p.name.getText();if(!p.initializer||!c.isCallExpression(p.initializer)){r[d]={type:"var"};continue}const n=p.initializer.arguments[0];if(!p.initializer.expression.getFullText().includes("/*#__PURE__*/Object.freeze")||!c.isObjectLiteralExpression(n))continue;const a=[];for(const t of n.properties){if(!c.isPropertyAssignment(t)||!(c.isIdentifier(t.name)||c.isStringLiteral(t.name))||t.name.text!=="__proto__"&&!c.isIdentifier(t.initializer))throw new N(t,"Expected a property assignment");t.name.text!=="__proto__"&&a.push({exportedName:t.name.text,localName:t.initializer.getText()})}e.unshift({name:d,exports:a,location:l})}return{namespaces:e,itemTypes:r}}fix(){let e=this.sourceFile.getFullText();const{namespaces:r,itemTypes:s}=this.findNamespaces();for(const l of r){const v=e.slice(l.location.end);e=e.slice(0,l.location.start);for(const{exportedName:p,localName:d}of l.exports)if(p===d){const{type:n,generics:a}=s[d]||{};if(n==="interface"||n==="type"){const t=Ae(a);e+=`type ${l.name}_${p}${t.in} = ${d}${t.out};
`}else if(n==="enum"||n==="class"){const t=Ae(a);e+=`type ${l.name}_${p}${t.in} = ${d}${t.out};
`,e+=`declare const ${l.name}_${p}: typeof ${d};
`}else e+=`declare const ${l.name}_${p}: typeof ${d};
`}if(l.name){e+=`declare namespace ${l.name} {
`,e+=`  export {
`;for(const{exportedName:p,localName:d}of l.exports)p===d?e+=`    ${l.name}_${p} as ${p},
`:e+=`    ${d} as ${p},
`;e+=`  };
`,e+="}"}e+=l.textBeforeCodeAfter??"",e+=v}return e}}function Ae(f){return!f||!f.length?{in:"",out:""}:{in:`<${f.map(e=>e.getText()).join(", ")}>`,out:`<${f.map(e=>e.name.getText()).join(", ")}>`}}g(Ae,"renderTypeParams");let _e=1;function wt(f){return k({type:"Program",sourceType:"module",body:[]},{start:f.getFullStart(),end:f.getEnd()})}g(wt,"createProgram");function St(f){const e={type:"Identifier",name:String(_e++)};return{ident:e,expr:{type:"AssignmentPattern",left:e,right:f}}}g(St,"createReference");function D(f){return k({type:"Identifier",name:f.getText()},f)}g(D,"createIdentifier");function Et(f){const e=k({type:"FunctionExpression",id:null,params:[],body:{type:"BlockStatement",body:[]}},f),r=k({type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:String(_e++)},arguments:[e],optional:!1}},f);return{fn:e,iife:r}}g(Et,"createIIFE");function Ct(){const f={type:"ArrayExpression",elements:[]};return{expr:f,stmt:{type:"ReturnStatement",argument:f}}}g(Ct,"createReturn");function Tt(f,e){return k({type:"FunctionDeclaration",id:k({type:"Identifier",name:c.idText(f)},f),params:[],body:{type:"BlockStatement",body:[]}},e)}g(Tt,"createDeclaration");function _(f){if(c.isLiteralExpression(f))return{type:"Literal",value:f.text};if(c.isPropertyAccessExpression(f)){if(c.isPrivateIdentifier(f.name))throw new N(f.name);return k({type:"MemberExpression",computed:!1,optional:!1,object:_(f.expression),property:_(f.name)},{start:f.expression.getStart(),end:f.name.getEnd()})}if(c.isIdentifier(f))return D(f);if(f.kind==c.SyntaxKind.NullKeyword)return{type:"Literal",value:null};throw new N(f)}g(_,"convertExpression");function k(f,e){let r="start"in e?e:{start:e.getStart(),end:e.getEnd()};return Object.assign(f,r)}g(k,"withStartEnd");function Y(f,e){return(c.getCombinedModifierFlags(f)&e)===e}g(Y,"matchesModifier");function Nt({sourceFile:f}){const e=new Je(f.getFullText()),r=new Set,s=new Set;let l="";const v=new Map,p=new Map;for(const u of f.statements){if(c.isEmptyStatement(u)){e.remove(u.getStart(),u.getEnd());continue}if(c.isEnumDeclaration(u)||c.isFunctionDeclaration(u)||c.isInterfaceDeclaration(u)||c.isClassDeclaration(u)||c.isTypeAliasDeclaration(u)||c.isModuleDeclaration(u)){if(u.name){const m=u.name.getText();r.add(m),Y(u,c.ModifierFlags.ExportDefault)?l=m:Y(u,c.ModifierFlags.Export)&&s.add(m),u.flags&c.NodeFlags.GlobalAugmentation||h(m,[pe(u),Le(u)])}c.isModuleDeclaration(u)&&Ot(e,u),je(e,u)}else if(c.isVariableStatement(u)){const{declarations:m}=u.declarationList,y=Y(u,c.ModifierFlags.Export);for(const E of u.declarationList.declarations)if(c.isIdentifier(E.name)){const T=E.name.getText();r.add(T),y&&s.add(T)}if(je(e,u),m.length==1){const E=m[0];c.isIdentifier(E.name)&&h(E.name.getText(),[pe(u),Le(u)])}else{const E=m.slice(),T=E.shift();h(T.name.getText(),[pe(u),T.getEnd()]);for(const R of E)c.isIdentifier(R.name)&&h(R.name.getText(),[R.getFullStart(),R.getEnd()])}const{flags:b}=u.declarationList,x=`declare ${b&c.NodeFlags.Let?"let":b&c.NodeFlags.Const?"const":"var"} `,S=u.declarationList.getChildren().find(E=>E.kind===c.SyntaxKind.SyntaxList).getChildren();let C=0;for(const E of S)if(E.kind===c.SyntaxKind.CommaToken)C=E.getStart(),e.remove(C,E.getEnd());else if(C){e.appendLeft(C,`;
`);const T=E.getFullStart(),R=e.slice(T,E.getStart());let $=R.length-R.trimStart().length;$?e.overwrite(T,T+$,x):e.appendLeft(T,x)}}}for(const u of f.statements)if(t(u),!!Y(u,c.ModifierFlags.ExportDefault)&&(c.isFunctionDeclaration(u)||c.isClassDeclaration(u))){if(u.name)continue;l||(l=o("export_default"));const m=u.getChildren(),y=m.findIndex(S=>S.kind===c.SyntaxKind.ClassKeyword||S.kind===c.SyntaxKind.FunctionKeyword),b=m[y],w=m[y+1];if(w.kind>=c.SyntaxKind.FirstPunctuation&&w.kind<=c.SyntaxKind.LastPunctuation){const S=e.slice(b.getEnd(),w.getStart())!=" ";e.appendLeft(w.getStart(),`${S?" ":""}${l}`)}else e.appendRight(b.getEnd(),` ${l}`)}for(const u of p.values()){const y=u.pop()[0];for(const b of u)e.move(b[0],b[1],y)}l&&e.append(`
export default ${l};
`),s.size&&e.append(`
export { ${[...s].join(", ")} };
`);for(const[u,m]of v.entries())e.prepend(`import * as ${m} from "${u}";
`);const d=f.getLineStarts(),n=new Set;for(const u of f.typeReferenceDirectives){n.add(u.fileName);const{line:m}=f.getLineAndCharacterOfPosition(u.pos),y=d[m];let b=f.getLineEndOfPosition(u.pos);e.slice(b,b+1)==`
`&&(b+=1),e.remove(y,b)}const a=new Set;for(const u of f.referencedFiles){a.add(u.fileName);const{line:m}=f.getLineAndCharacterOfPosition(u.pos),y=d[m];let b=f.getLineEndOfPosition(u.pos);e.slice(b,b+1)==`
`&&(b+=1),e.remove(y,b)}return{code:e,typeReferences:n,fileReferences:a};function t(u){if(c.forEachChild(u,t),c.isImportTypeNode(u)){if(!c.isLiteralTypeNode(u.argument)||!c.isStringLiteral(u.argument.literal))throw new N(u,"inline imports should have a literal argument");const m=u.argument.literal.text,y=u.getChildren(),b=y.find(C=>C.kind===c.SyntaxKind.ImportKeyword).getStart();let w=u.getEnd();const x=y.find(C=>C.kind===c.SyntaxKind.DotToken||C.kind===c.SyntaxKind.LessThanToken);x&&(w=x.getStart());const S=i(m);e.overwrite(b,w,S)}}function i(u){let m=v.get(u);return m||(m=o(u.replace(/[^a-zA-Z0-9_$]/g,()=>"_")),v.set(u,m)),m}function o(u){let m=u;for(;r.has(m);)m=`_${m}`;return r.add(m),m}function h(u,m){let y=p.get(u);if(!y)y=[m],p.set(u,y);else{const b=y[y.length-1];b[1]===m[0]?b[1]=m[1]:y.push(m)}}}g(Nt,"preProcess");function je(f,e){if(!c.canHaveModifiers(e))return;let r=!1;const s=c.isEnumDeclaration(e)||c.isClassDeclaration(e)||c.isFunctionDeclaration(e)||c.isModuleDeclaration(e)||c.isVariableStatement(e);for(const l of e.modifiers??[])switch(l.kind){case c.SyntaxKind.ExportKeyword:case c.SyntaxKind.DefaultKeyword:f.remove(l.getStart(),l.getEnd()+1);break;case c.SyntaxKind.DeclareKeyword:r=!0}s&&!r&&f.appendRight(e.getStart(),"declare ")}g(je,"fixModifiers");function Ot(f,e){if(!(!e.body||!c.isModuleBlock(e.body))){for(const r of e.body.statements)if(c.isExportDeclaration(r)&&r.exportClause){if(c.isNamespaceExport(r.exportClause))continue;for(const s of r.exportClause.elements)s.propertyName||f.appendLeft(s.name.getEnd(),` as ${s.name.getText()}`)}}}g(Ot,"duplicateExports");function pe(f){const e=f.getFullStart();return e+(Be(f,e)?1:0)}g(pe,"getStart");function Le(f){const e=f.getEnd();return e+(Be(f,e)?1:0)}g(Le,"getEnd");function Be(f,e){return f.getSourceFile().getFullText()[e]==`
`}g(Be,"newlineAt");const kt=new Set([c.SyntaxKind.LiteralType,c.SyntaxKind.VoidKeyword,c.SyntaxKind.UnknownKeyword,c.SyntaxKind.AnyKeyword,c.SyntaxKind.BooleanKeyword,c.SyntaxKind.NumberKeyword,c.SyntaxKind.StringKeyword,c.SyntaxKind.ObjectKeyword,c.SyntaxKind.NullKeyword,c.SyntaxKind.UndefinedKeyword,c.SyntaxKind.SymbolKeyword,c.SyntaxKind.NeverKeyword,c.SyntaxKind.ThisKeyword,c.SyntaxKind.ThisType,c.SyntaxKind.BigIntKeyword]);class Ke{static{g(this,"DeclarationScope")}constructor({id:e,range:r}){if(this.scopes=[],e)this.declaration=Tt(e,r);else{const{iife:l,fn:v}=Et(r);this.iife=l,this.declaration=v}const s=Ct();this.declaration.body.body.push(s.stmt),this.returnExpr=s.expr}pushScope(){this.scopes.push(new Set)}popScope(e=1){for(let r=0;r<e;r++)this.scopes.pop()}pushTypeVariable(e){const r=e.getText();this.scopes[this.scopes.length-1]?.add(r)}pushReference(e){let r;if(e.type==="Identifier"?r=e.name:e.type==="MemberExpression"&&e.object.type==="Identifier"&&(r=e.object.name),r){for(const v of this.scopes)if(v.has(r))return}if(r==="this")return;const{ident:s,expr:l}=St(e);this.declaration.params.push(l),this.returnExpr.elements.push(s)}pushIdentifierReference(e){this.pushReference(D(e))}convertEntityName(e){return c.isIdentifier(e)?D(e):k({type:"MemberExpression",computed:!1,optional:!1,object:this.convertEntityName(e.left),property:D(e.right)},e)}convertPropertyAccess(e){if(!c.isIdentifier(e.expression)&&!c.isPropertyAccessExpression(e.expression))throw new N(e.expression);if(c.isPrivateIdentifier(e.name))throw new N(e.name);let r=c.isIdentifier(e.expression)?D(e.expression):this.convertPropertyAccess(e.expression);return k({type:"MemberExpression",computed:!1,optional:!1,object:r,property:D(e.name)},e)}convertComputedPropertyName(e){if(!e.name||!c.isComputedPropertyName(e.name))return;const{expression:r}=e.name;if(!(c.isLiteralExpression(r)||c.isPrefixUnaryExpression(r))){if(c.isIdentifier(r))return this.pushReference(D(r));if(c.isPropertyAccessExpression(r))return this.pushReference(this.convertPropertyAccess(r));throw new N(r)}}convertParametersAndType(e){this.convertComputedPropertyName(e);const r=this.convertTypeParameters(e.typeParameters);for(const s of e.parameters)this.convertTypeNode(s.type);this.convertTypeNode(e.type),this.popScope(r)}convertHeritageClauses(e){for(const r of e.heritageClauses||[])for(const s of r.types)this.pushReference(_(s.expression)),this.convertTypeArguments(s)}convertTypeArguments(e){if(e.typeArguments)for(const r of e.typeArguments)this.convertTypeNode(r)}convertMembers(e){for(const r of e){if(c.isPropertyDeclaration(r)||c.isPropertySignature(r)||c.isIndexSignatureDeclaration(r)){c.isPropertyDeclaration(r)&&r.initializer&&c.isPropertyAccessExpression(r.initializer)&&this.pushReference(this.convertPropertyAccess(r.initializer)),this.convertComputedPropertyName(r),this.convertTypeNode(r.type);continue}if(c.isMethodDeclaration(r)||c.isMethodSignature(r)||c.isConstructorDeclaration(r)||c.isConstructSignatureDeclaration(r)||c.isCallSignatureDeclaration(r)||c.isGetAccessorDeclaration(r)||c.isSetAccessorDeclaration(r))this.convertParametersAndType(r);else throw new N(r)}}convertTypeParameters(e){if(!e)return 0;for(const r of e)this.convertTypeNode(r.constraint),this.convertTypeNode(r.default),this.pushScope(),this.pushTypeVariable(r.name);return e.length}convertTypeNode(e){if(e&&!kt.has(e.kind)){if(c.isTypeReferenceNode(e)){this.pushReference(this.convertEntityName(e.typeName)),this.convertTypeArguments(e);return}if(c.isTypeLiteralNode(e))return this.convertMembers(e.members);if(c.isArrayTypeNode(e))return this.convertTypeNode(e.elementType);if(c.isTupleTypeNode(e)){for(const r of e.elements)this.convertTypeNode(r);return}if(c.isNamedTupleMember(e)||c.isParenthesizedTypeNode(e)||c.isTypeOperatorNode(e)||c.isTypePredicateNode(e))return this.convertTypeNode(e.type);if(c.isUnionTypeNode(e)||c.isIntersectionTypeNode(e)){for(const r of e.types)this.convertTypeNode(r);return}if(c.isMappedTypeNode(e)){const{typeParameter:r,type:s,nameType:l}=e;this.convertTypeNode(r.constraint),this.pushScope(),this.pushTypeVariable(r.name),this.convertTypeNode(s),l&&this.convertTypeNode(l),this.popScope();return}if(c.isConditionalTypeNode(e)){this.convertTypeNode(e.checkType),this.pushScope(),this.convertTypeNode(e.extendsType),this.convertTypeNode(e.trueType),this.convertTypeNode(e.falseType),this.popScope();return}if(c.isIndexedAccessTypeNode(e)){this.convertTypeNode(e.objectType),this.convertTypeNode(e.indexType);return}if(c.isFunctionOrConstructorTypeNode(e)){this.convertParametersAndType(e);return}if(c.isTypeQueryNode(e)){this.pushReference(this.convertEntityName(e.exprName));return}if(c.isRestTypeNode(e)){this.convertTypeNode(e.type);return}if(c.isOptionalTypeNode(e)){this.convertTypeNode(e.type);return}if(c.isTemplateLiteralTypeNode(e)){for(const r of e.templateSpans)this.convertTypeNode(r.type);return}if(c.isInferTypeNode(e)){const{typeParameter:r}=e;this.convertTypeNode(r.constraint),this.pushTypeVariable(r.name);return}else throw new N(e)}}convertNamespace(e,r=!1){if(this.pushScope(),r&&e.body&&c.isModuleDeclaration(e.body)){this.convertNamespace(e.body,!0);return}if(!e.body||!c.isModuleBlock(e.body))throw new N(e,'namespace must have a "ModuleBlock" body.');const{statements:s}=e.body;for(const l of s){if(c.isEnumDeclaration(l)||c.isFunctionDeclaration(l)||c.isClassDeclaration(l)||c.isInterfaceDeclaration(l)||c.isTypeAliasDeclaration(l)||c.isModuleDeclaration(l)){if(l.name&&c.isIdentifier(l.name))this.pushTypeVariable(l.name);else throw new N(l,"non-Identifier name not supported");continue}if(c.isVariableStatement(l)){for(const v of l.declarationList.declarations)if(c.isIdentifier(v.name))this.pushTypeVariable(v.name);else throw new N(v,"non-Identifier name not supported");continue}if(!c.isExportDeclaration(l))throw new N(l,"namespace child (hoisting) not supported yet")}for(const l of s){if(c.isVariableStatement(l)){for(const v of l.declarationList.declarations)v.type&&this.convertTypeNode(v.type);continue}if(c.isFunctionDeclaration(l)){this.convertParametersAndType(l);continue}if(c.isInterfaceDeclaration(l)||c.isClassDeclaration(l)){const v=this.convertTypeParameters(l.typeParameters);this.convertHeritageClauses(l),this.convertMembers(l.members),this.popScope(v);continue}if(c.isTypeAliasDeclaration(l)){const v=this.convertTypeParameters(l.typeParameters);this.convertTypeNode(l.type),this.popScope(v);continue}if(c.isModuleDeclaration(l)){this.convertNamespace(l,r);continue}if(!c.isEnumDeclaration(l))if(c.isExportDeclaration(l)){if(l.exportClause){if(c.isNamespaceExport(l.exportClause))throw new N(l.exportClause);for(const v of l.exportClause.elements){const p=v.propertyName||v.name;this.pushIdentifierReference(p)}}}else throw new N(l,"namespace child (walking) not supported yet")}this.popScope()}}function Dt({sourceFile:f}){return new Rt(f).transform()}g(Dt,"convert");class Rt{static{g(this,"Transformer")}constructor(e){this.sourceFile=e,this.declarations=new Map,this.ast=wt(e);for(const r of e.statements)this.convertStatement(r)}transform(){return{ast:this.ast}}pushStatement(e){this.ast.body.push(e)}createDeclaration(e,r){const s={start:e.getFullStart(),end:e.getEnd()};if(!r){const d=new Ke({range:s});return this.pushStatement(d.iife),d}const l=r.getText(),v=new Ke({id:r,range:s}),p=this.declarations.get(l);if(p){p.pushIdentifierReference(r),p.declaration.end=s.end;let d=this.ast.body.findIndex(n=>n==p.declaration);for(let n=d+1;n<this.ast.body.length;n++){const a=this.ast.body[n];a.start=a.end=s.end}}else this.pushStatement(v.declaration),this.declarations.set(l,v);return p||v}convertStatement(e){if(c.isEnumDeclaration(e))return this.convertEnumDeclaration(e);if(c.isFunctionDeclaration(e))return this.convertFunctionDeclaration(e);if(c.isInterfaceDeclaration(e)||c.isClassDeclaration(e))return this.convertClassOrInterfaceDeclaration(e);if(c.isTypeAliasDeclaration(e))return this.convertTypeAliasDeclaration(e);if(c.isVariableStatement(e))return this.convertVariableStatement(e);if(c.isExportDeclaration(e)||c.isExportAssignment(e))return this.convertExportDeclaration(e);if(c.isModuleDeclaration(e))return this.convertNamespaceDeclaration(e);if(e.kind==c.SyntaxKind.NamespaceExportDeclaration)return this.removeStatement(e);if(c.isImportDeclaration(e)||c.isImportEqualsDeclaration(e))return this.convertImportDeclaration(e);throw new N(e)}removeStatement(e){this.pushStatement(k({type:"ExpressionStatement",expression:{type:"Literal",value:"pls remove me"}},e))}convertNamespaceDeclaration(e){if(e.flags&c.NodeFlags.GlobalAugmentation||!c.isIdentifier(e.name)){this.createDeclaration(e).convertNamespace(e,!0);return}const s=this.createDeclaration(e,e.name);s.pushIdentifierReference(e.name),s.convertNamespace(e)}convertEnumDeclaration(e){this.createDeclaration(e,e.name).pushIdentifierReference(e.name)}convertFunctionDeclaration(e){if(!e.name)throw new N(e,"FunctionDeclaration should have a name");const r=this.createDeclaration(e,e.name);r.pushIdentifierReference(e.name),r.convertParametersAndType(e)}convertClassOrInterfaceDeclaration(e){if(!e.name)throw new N(e,"ClassDeclaration / InterfaceDeclaration should have a name");const r=this.createDeclaration(e,e.name),s=r.convertTypeParameters(e.typeParameters);r.convertHeritageClauses(e),r.convertMembers(e.members),r.popScope(s)}convertTypeAliasDeclaration(e){const r=this.createDeclaration(e,e.name),s=r.convertTypeParameters(e.typeParameters);r.convertTypeNode(e.type),r.popScope(s)}convertVariableStatement(e){const{declarations:r}=e.declarationList;if(r.length!==1)throw new N(e,"VariableStatement with more than one declaration not yet supported");for(const s of r){if(!c.isIdentifier(s.name))throw new N(e,"VariableDeclaration must have a name");this.createDeclaration(e,s.name).convertTypeNode(s.type)}}convertExportDeclaration(e){if(c.isExportAssignment(e)){this.pushStatement(k({type:"ExportDefaultDeclaration",declaration:_(e.expression)},e));return}const r=e.moduleSpecifier?_(e.moduleSpecifier):void 0;if(!e.exportClause)this.pushStatement(k({type:"ExportAllDeclaration",source:r,exported:null},e));else if(c.isNamespaceExport(e.exportClause))this.pushStatement(k({type:"ExportAllDeclaration",source:r,exported:D(e.exportClause.name)},e));else{const s=[];for(const l of e.exportClause.elements)s.push(this.convertExportSpecifier(l));this.pushStatement(k({type:"ExportNamedDeclaration",declaration:null,specifiers:s,source:r},e))}}convertImportDeclaration(e){if(c.isImportEqualsDeclaration(e)){if(!c.isExternalModuleReference(e.moduleReference))throw new N(e,"ImportEquals should have a literal source.");this.pushStatement(k({type:"ImportDeclaration",specifiers:[{type:"ImportDefaultSpecifier",local:D(e.name)}],source:_(e.moduleReference.expression)},e));return}const r=_(e.moduleSpecifier),s=e.importClause&&e.importClause.namedBindings?this.convertNamedImportBindings(e.importClause.namedBindings):[];e.importClause&&e.importClause.name&&s.push({type:"ImportDefaultSpecifier",local:D(e.importClause.name)}),this.pushStatement(k({type:"ImportDeclaration",specifiers:s,source:r},e))}convertNamedImportBindings(e){return c.isNamedImports(e)?e.elements.map(r=>{const s=D(r.name),l=r.propertyName?D(r.propertyName):s;return{type:"ImportSpecifier",local:s,imported:l}}):[{type:"ImportNamespaceSpecifier",local:D(e.name)}]}convertExportSpecifier(e){const r=D(e.name);return{type:"ExportSpecifier",exported:r,local:e.propertyName?D(e.propertyName):r}}}class Mt{static{g(this,"ExportsFixer")}constructor(e){this.source=e,this.DEBUG=!!process.env.DTS_EXPORTS_FIXER_DEBUG}fix(){const e=this.findExports();return e.sort((r,s)=>r.location.start-s.location.start),this.getCodeParts(e).join("")}findExports(){const{rawExports:e,values:r,types:s}=this.getExportsAndLocals();return e.map(l=>{const v=l.elements.map(p=>{const d=p.name.text,n=p.propertyName?.text??p.name.text,a=s.some(t=>t.getText()===n)&&!r.some(t=>t.getText()===n)?"type":"value";return this.DEBUG&&console.log(`export ${n} as ${d} is a ${a}`),{exportedName:d,localName:n,kind:a}});return{location:{start:l.getStart(),end:l.getEnd()},exports:v}})}getExportsAndLocals(e=this.source.statements){const r=[],s=[],l=[],v=g(p=>{const{rawExports:d,values:n,types:a}=this.getExportsAndLocals(p);r.push(...d),s.push(...n),l.push(...a)},"recurseInto");for(const p of e)if(this.DEBUG&&console.log(p.getText(),p.kind),!c.isImportDeclaration(p)){if(c.isInterfaceDeclaration(p)||c.isTypeAliasDeclaration(p)){this.DEBUG&&console.log(`${p.name.getFullText()} is a type`),l.push(p.name);continue}if(c.isEnumDeclaration(p)||c.isFunctionDeclaration(p)||c.isClassDeclaration(p)||c.isVariableStatement(p)){if(c.isVariableStatement(p))for(const d of p.declarationList.declarations)c.isIdentifier(d.name)&&(this.DEBUG&&console.log(`${d.name.getFullText()} is a value (from var statement)`),s.push(d.name));else p.name&&(this.DEBUG&&console.log(`${p.name.getFullText()} is a value (from declaration)`),s.push(p.name));continue}if(c.isModuleBlock(p)){const d=p.statements;v(d);continue}if(c.isModuleDeclaration(p)){p.name&&c.isIdentifier(p.name)&&(this.DEBUG&&console.log(`${p.name.getFullText()} is a value (from module declaration)`),s.push(p.name)),v(p.getChildren());continue}if(c.isExportDeclaration(p)){if(p.moduleSpecifier||p.isTypeOnly)continue;const d=p.exportClause;if(!d||!c.isNamedExports(d))continue;r.push(d);continue}this.DEBUG&&console.log("unhandled statement",p.getFullText(),p.kind)}return{rawExports:r,values:s,types:l}}createNamedExport(e,r=!1){return`${!r&&e.kind==="type"?"type ":""}${e.localName}${e.localName===e.exportedName?"":` as ${e.exportedName}`}`}getCodeParts(e){let r=0;const s=this.source.getFullText(),l=[];for(const v of e){const p=s.slice(r,v.location.start);p.length>0&&l.push(p),l.push(this.getExportStatement(v)),r=v.location.end}return r<s.length&&l.push(s.slice(r)),l}getExportStatement(e){const r=e.exports.every(s=>s.kind==="type")&&e.exports.length>0;return`${r?"type ":""}{ ${e.exports.map(s=>this.createNamedExport(s,r)).join(", ")} }`}}function J(f,e){return c.createSourceFile(f,e,c.ScriptTarget.Latest,!0)}g(J,"parse");const It=g(()=>{const f=new Map,e=new Map;return{name:"dts-transform",options({onLog:r,...s}){return{...s,onLog(l,v,p){l==="warn"&&v.code=="CIRCULAR_DEPENDENCY"||(r?r(l,v,p):p(l,v))},treeshake:{moduleSideEffects:"no-external",propertyReadSideEffects:!0,unknownGlobalSideEffects:!1}}},outputOptions(r){return{...r,chunkFileNames:r.chunkFileNames||"[name]-[hash].d.ts",entryFileNames:r.entryFileNames||"[name].d.ts",format:"es",exports:"named",compact:!1,freeze:!0,interop:"esModule",generatedCode:Object.assign({symbols:!1},r.generatedCode),strict:!1}},transform(r,s){let l=J(s,r);const v=Nt({sourceFile:l});f.set(l.fileName,v.typeReferences),e.set(l.fileName,v.fileReferences),r=v.code.toString(),l=J(s,r);const p=Dt({sourceFile:l});return process.env.DTS_DUMP_AST&&(console.log(s),console.log(r),console.log(JSON.stringify(p.ast.body,void 0,2))),{code:r,ast:p.ast,map:v.code.generateMap()}},renderChunk(r,s,l){const v=J(s.fileName,r),p=new xt(v),d=new Set,n=new Set;for(const i of Object.keys(s.modules)){for(const o of f.get(i.split("\\").join("/"))||[])d.add(o);for(const o of e.get(i.split("\\").join("/"))||[])if(o.startsWith(".")){const h=O.join(O.dirname(i),o),u=l.file&&O.dirname(l.file)||s.facadeModuleId&&O.dirname(s.facadeModuleId)||".";let m=O.relative(u,h).split("\\").join("/");m[0]!=="."&&(m="./"+m),n.add(m)}else n.add(o)}let a=qe(Array.from(n,i=>`/// <reference path="${i}" />`));return a+=qe(Array.from(d,i=>`/// <reference types="${i}" />`)),a+=p.fix(),a||(a+=`
export { }`),{code:new Mt(J(s.fileName,a)).fix(),map:{mappings:""}}}}},"transform");function qe(f){return f.length?f.join(`
`)+`
`:""}g(qe,"writeBlock");const de=/\.([cm]ts|[tj]sx?)$/;function me({programs:f,resolvedOptions:{compilerOptions:e,tsconfig:r}},s,l){if(!f.length&&X.test(s))return{code:l};const v=f.find(p=>!!p.getSourceFile(s));if(v){const p=v.getSourceFile(s);return{code:p?.getFullText(),source:p,program:v}}else if(c.sys.fileExists(s)){const p=ht(s,e,r);f.push(p);const d=p.getSourceFile(s);return{code:d?.getFullText(),source:d,program:p}}else return null}g(me,"getModule");const We=g((f={})=>{const e=It(),r={programs:[],resolvedOptions:dt(f)};return{name:"dts",outputOptions:e.outputOptions,renderChunk:e.renderChunk,options(s){let{input:l=[]}=s;if(!Array.isArray(l))l=typeof l=="string"?[l]:Object.values(l);else if(l.length>1){s.input={};for(const v of l){let p=v.replace(/((\.d)?\.(c|m)?(t|j)sx?)$/,"");O.isAbsolute(v)?p=O.basename(p):p=O.normalize(p),s.input[p]=v}}return r.programs=bt(Object.values(l),r.resolvedOptions.compilerOptions,r.resolvedOptions.tsconfig),e.options.call(this,s)},transform(s,l){if(!de.test(l))return null;const v=g(a=>{if(a.program){const t=O.dirname(l);a.program.getSourceFiles().map(o=>o.fileName).filter(o=>o.startsWith(t)).forEach(this.addWatchFile)}},"watchFiles"),p=g(()=>{const a=me(r,l,s);return a?(v(a),e.transform.call(this,a.code,l)):null},"handleDtsFile"),d=g(()=>{const a=l.replace(de,Pe);let t=me(r,a,s);return t?(v(t),e.transform.call(this,t.code,a)):null},"treatTsAsDts"),n=g(()=>{const a=me(r,l,s);if(!a||!a.source||!a.program)return null;v(a);const t=l.replace(de,Pe);let i;const{emitSkipped:o,diagnostics:h}=a.program.emit(a.source,(u,m)=>{i=e.transform.call(this,m,t)},void 0,!0);if(o){const u=h.filter(m=>m.category===c.DiagnosticCategory.Error);u.length&&(console.error(c.formatDiagnostics(u,le)),this.error("Failed to compile. Check the logs above."))}return i},"generateDtsFromTs");return X.test(l)?p():d()??n()},resolveId(s,l){if(!l)return;l=l.split("\\").join("/");let v=r.resolvedOptions.compilerOptions;if(r.resolvedOptions.tsconfig){const d=s.startsWith(".")?O.resolve(O.dirname(l),s):s;v=fe(d,r.resolvedOptions.compilerOptions,r.resolvedOptions.tsconfig).compilerOptions}const{resolvedModule:p}=c.resolveModuleName(s,l,v,c.sys);if(p)return!r.resolvedOptions.respectExternal&&p.isExternalLibraryImport?{id:s,external:!0}:{id:O.resolve(p.resolvedFileName)}}}},"plugin");export{We as default,We as dts};
